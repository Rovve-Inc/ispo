{% extends "base.html" %}

{% block title %}Referral Program{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-8 offset-md-2">
        <div class="card">
            <div class="card-body">
                <h2 class="card-title text-center mb-4">ISPO Referral Program</h2>
                
                <div class="alert alert-info mb-4">
                        <h5 class="alert-heading">Earn More RV Tokens!</h5>
                        <p class="mb-0">
                            Get your referral code and share it with others. Before they delegate, they should register here with your code.
                            Once they delegate through Provenance Explorer, both of you will automatically receive 5% bonus RV tokens!
                        </p>
                    </div>

                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Generate Referral Code</h5>
                                <form id="generateReferralForm">
                                    <div class="mb-3">
                                        <label for="walletAddress" class="form-label">Your Wallet Address</label>
                                        <input type="text" class="form-control" id="walletAddress" 
                                               placeholder="Enter your Provenance wallet address (pb...)"
                                               pattern="^pb[a-zA-Z0-9]{39}$" required>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Generate Code</button>
                                </form>
                                <div id="referralCodeDisplay" class="d-none mt-3">
                                    <div class="alert alert-success">
                                        <h6>Your Referral Code:</h6>
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="referralCode" readonly>
                                            <button class="btn btn-outline-secondary" type="button" onclick="copyReferralCode()">
                                                Copy
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Use Referral Code</h5>
                                <form id="useReferralForm">
                                    <div class="mb-3">
                                        <label for="referredWallet" class="form-label">Your Wallet Address</label>
                                        <input type="text" class="form-control" id="referredWallet" 
                                               placeholder="Enter your Provenance wallet address (pb...)"
                                               pattern="^pb[a-zA-Z0-9]{39}$" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="referralCodeInput" class="form-label">Referral Code</label>
                                        <input type="text" class="form-control" id="referralCodeInput" 
                                               placeholder="Enter referral code" required>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Apply Code</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">How It Works</h5>
                        <ol class="list-group list-group-numbered mb-0">
                            <li class="list-group-item">Generate your unique referral code</li>
                            <li class="list-group-item">Share your code with potential delegators</li>
                            <li class="list-group-item">Have them register their wallet here with your code <strong>before</strong> delegating</li>
                            <li class="list-group-item">Once they delegate through Provenance Explorer, our system will automatically track it</li>
                            <li class="list-group-item">Both parties receive 5% bonus RV tokens at distribution</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="/static/js/referral.js"></script>
{% endblock %}